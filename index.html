<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Smart Parcel Box</title>

<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

<style>
body{
  background:#111;
  color:white;
  font-family:sans-serif;
  text-align:center;
  margin-top:80px;
}

h1{
  font-size:28px;
}

input{
  font-size:20px;
  padding:10px;
  width:180px;
  text-align:center;
  border-radius:8px;
  border:none;
}

button{
  font-size:22px;
  padding:12px 25px;
  border:none;
  border-radius:8px;
  background:#00c853;
  color:white;
  cursor:pointer;
  margin-top:15px;
}

button:hover{
  background:#00e676;
}

#status{
  margin-top:20px;
  font-size:18px;
}
</style>
</head>

<body>

<h1>Smart Parcel Box</h1>

<input type="text" id="codeInput" placeholder="ใส่รหัส"><br>
<button onclick="sendCode()">ส่งรหัส</button>

<div id="status"></div>

<script>
const client = mqtt.connect("wss://broker.hivemq.com:8884/mqtt");

client.on("connect", function () {
    console.log("Connected");
    client.subscribe("notify");
});

client.on("message", function (topic, message) {
    if(topic === "notify"){
        document.getElementById("status").innerText = message.toString();
    }
});

function sendCode(){
    const code = document.getElementById("codeInput").value.trim();

    if(code === ""){
        alert("กรุณาใส่รหัส");
        return;
    }

    client.publish("verify", code);
}
</script>

</body>
</html>
