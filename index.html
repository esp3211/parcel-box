<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parcel Locker</title>

<!-- üîπ ‡πÇ‡∏´‡∏•‡∏î MQTT Library -->
<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

<style>
body{
    background:#0f172a;
    font-family:sans-serif;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}
.card{
    background:#1e293b;
    padding:30px;
    border-radius:20px;
    width:300px;
    text-align:center;
    box-shadow:0 0 20px #00f2ff55;
}
input{
    width:90%;
    padding:12px;
    border:none;
    border-radius:10px;
    margin-bottom:15px;
    font-size:16px;
    text-align:center;
}
button{
    padding:12px 25px;
    border:none;
    border-radius:10px;
    font-size:16px;
    cursor:pointer;
    background:#00c896;
    color:white;
}
button:hover{
    background:#00e0a8;
}
#result{
    margin-top:15px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="card">
    <h2>üì¶ ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏</h2>
    <input type="text" id="parcelCode" placeholder="‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏">
    <br>
    <button onclick="checkParcel()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
    <p id="result"></p>

    <hr style="margin:20px 0; opacity:0.3;">

    <button onclick="openBox()">üîì ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á</button>
    <p id="status">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT...</p>
</div>

<script>

// üîπ ‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
const correctCode = "1234";

// üîπ ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏
function checkParcel(){
    let input = document.getElementById("parcelCode").value;

    if(input === correctCode){
        document.getElementById("result").innerHTML = "‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á...";
        openBox(); // ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å ‚Üí ‡∏™‡πà‡∏á MQTT ‡πÄ‡∏•‡∏¢
    }else{
        document.getElementById("result").innerHTML = "‚ùå ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
    }
}

// üîπ ‡∏ï‡πà‡∏≠ MQTT
const statusEl = document.getElementById("status");
const client = mqtt.connect("wss://broker.hivemq.com:8000/mqtt");

client.on("connect", ()=>{
    statusEl.innerText = "‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
});

// üîπ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á
function openBox(){
    client.publish("parcel/open", "OPEN");
    statusEl.innerText = "üì§ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß";
}

</script>

</body>
</html>
