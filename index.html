<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Parcel Box</title>

<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

<style>
body{
  background:#111;
  color:white;
  font-family:sans-serif;
  text-align:center;
  margin-top:50px;
}
button{
  padding:15px 30px;
  font-size:18px;
  margin:10px;
}
#status{
  margin-bottom:20px;
  font-size:20px;
}
</style>
</head>

<body>

<h1>Smart Parcel Box</h1>
<div id="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå...</div>

<button onclick="sendLock()">üîí ‡∏•‡πá‡∏≠‡∏Å</button>
<button onclick="sendUnlock()">üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å</button>

<script>
const client = mqtt.connect("wss://test.mosquitto.org:8081");

client.on("connect", function () {
  console.log("Connected!");
  document.getElementById("status").innerText = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‚úÖ";
});

client.on("error", function (err) {
  console.log("Error:", err);
  document.getElementById("status").innerText = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚ùå";
});

function sendLock(){
  client.publish("parcel/lock", "LOCK");
  alert("‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
}

function sendUnlock(){
  client.publish("parcel/lock", "UNLOCK");
  alert("‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
}
</script>

</body>
</html>
